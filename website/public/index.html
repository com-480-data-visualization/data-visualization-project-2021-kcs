<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Playlist Explorer</title>

    <!-- MDL -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-orange.min.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet">

    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.js"></script>

</head>

<body>


<script>
    let user_data = [];
    let website_data = [];
</script>

<!-- Always shows a header, even in smaller screens. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">


    <!-- PAGE TOP BAR HEADER -->
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-title">PLAYLIST EXPLORER</span>
            <!-- Add spacer, to align navigation to the right -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation. We hide it in small screens. -->
            <nav class="mdl-navigation mdl-layout--large-screen-only">
                <!--
                <a class="mdl-navigation__link" href="">Home</a>
                <a class="mdl-navigation__link" href="">About</a>
                -->
            </nav>
        </div>
    </header>

    <!-- PAGE CONTENT -->
    <main class="mdl-layout__content">
        <div class='page-content'>

            <!-- IMPORT PLAYLIST Headline  -->
            <div class="headline">
                <h1>IMPORT YOUR FAVORITE PLAYLIST</h1>
                <hr>
            </div>

            <!-- Log In Portal  -->
            <div class="spotify-connect">

                <!-- Not Yet Connected  -->
                <div id="login">
                    <a href="/login"
                       class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">LOG
                        IN WITH SPOTIFY</a>
                </div>


                <!-- Connected  -->
                <div id="loggedin">

                    <div id="user-profile"></div>
                    <span class=important-buttons>
                  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                          id="get-playlists">MY PLAYLISTS</button>
                  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                          id="obtain-new-token">REFRESH SPOTIFY ACCESS</button>
                </span>

                    <!-- User playlists -->
                    <div id="user-playlists" class="playlist-embedding"></div>

                    <!-- Analyse 1 button -->
                    <a id="analyze-1"
                       class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                       href="#playlist-viz">ANALYZE</a>

                </div>


                <!-- User playlist container template -->
                <script id="user-playlist-embedding-template" type="text/x-handlebars-template">
                    <div class="spotify-playlist">
                <span class="mdl-chip">
                  <span class="mdl-chip__text">{{name}}</span>
                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-{{id}}">
                    <input type="checkbox" id="toggle-{{id}}" class="mdl-switch__input">
                    <span class="mdl-switch__label"></span>
                  </label>
                </span>

                        <div class="spotify-content">
                            <iframe src="https://open.spotify.com/embed/playlist/{{id}}" width="220" height="200"
                                    allowtransparency="true" allow="encrypted-media"></iframe>
                        </div>
                    </div>
                </script>

                <!-- User profile container template -->
                <script id="user-profile-template" type="text/x-handlebars-template">
                    <h2>Welcome {{display_name}} !</h2>
                </script>

            </div>

            <!-- POPULAR PLAYLISTS Headline  -->
            <div class="headline">
                <h1> OR CHOOSE AMONG THE MOST POPULAR ONES</h1>
                <hr>
            </div>

            <!-- DEFAULT PLAYLISTS -->
            <div id="default-playlists" class="playlist-embedding"></div>

            <!-- ANALYSE BUTTON (2) -->
            <div class='centered-container'>
                <a id="analyze-2"
                   class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                   href="#playlist-viz">ANALYZE</a>
            </div>


            <!-- PLAYLIST VISUALIZATION -->
            <div id="playlist-viz">
                <h1> PLAYLIST VISUALIZATION</h1>
                <hr>

                <!-- SCATTER PLOT VISUALIZATION  -->
                <div class="scatter-viz">
                    <!-- PARAMETER SELECTION -->
                    <label for="x-select-button">Select x axis:</label>
                    <select id="x-select-button"></select>
                    <br>
                    <label for="y-select-button">Select y axis:</label>
                    <select id="y-select-button"></select>

                    <!-- SCATTER PLOT  -->
                    <div id="scatter-plot"></div>
                </div>
            </div>
        </div>
    </main>

</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="js/spotify-communication.js"></script>
<script src="js/scatterPlot.js"></script>

</body>
</html>

