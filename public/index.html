<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Playlist Explorer</title>

    <!-- MDL -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-orange.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet">

    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.js"></script>

</head>

<body>


<script>
    let headers;
    let user_data = [];
    let graph_data = [];

    let clean_artist_data = function ({id, name}) {
        return {id, name};
    };


</script>

<!-- Always shows a header, even in smaller screens. -->
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <!-- PAGE TOP BAR HEADER -->
    <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-title">PLAYLIST EXPLORER</span>
            <!-- Add spacer, to align navigation to the right -->
            <div class="mdl-layout-spacer"></div>

            <!-- Navigation. We hide it in small screens. -->
            <nav class="mdl-navigation mdl-layout--large-screen-only">


                <a id="playlists_header" class="mdl-navigation__link">Playlists</a>
                <a id="audio_features_header" class="mdl-navigation__link">Audio features</a>
                <a id="artists_graph_header" class="mdl-navigation__link">Artists graph</a>

                <!--
                <a class="mdl-navigation__link" href="">About</a>
                -->
            </nav>
        </div>
    </header>

    <!-- PAGE CONTENT -->
    <main class="mdl-layout__content">
        <div class='page-content'>

            <div id="main_headline" class="headline">
                <h1>PLAYLIST EXPLORER</h1>
                <hr>

                <p class="p-text">
                    Beneath the surface, playlists are a stranger beast than one might expect. <br>
                    It is quite common for a user-made playlist to include tracks from different albums,
                    different artists, even different genres!

                    The playlist explorer helps you diving deep into your playlist and understand your tastes, or
                    discover new artists.
                </p>

            </div>


            <!-- IMPORT PLAYLIST Headline  -->
            <div id="playlists_headline" class="headline">
                <hr>
                <h1>IMPORT YOUR FAVORITE PLAYLIST</h1>
                <hr>
            </div>

            <!-- Log In Portal  -->
            <div class="spotify-connect">

                <!-- Not Yet Connected  -->
                <div id="login">

                    <p class="p-text">Connect your Spotify account via Spotify API to analyse your own playlists.</p>
                    <br>

                    <a href="/login"
                       class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">LOGIN
                        WITH SPOTIFY</a>
                </div>


                <!-- Connected  -->
                <div id="loggedin">

                    <div id="user-profile"></div>
                    <span class=important-buttons>
                  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                          id="get-playlists">MY PLAYLISTS</button>
                  <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                          id="obtain-new-token">REFRESH SPOTIFY ACCESS</button>
                </span>

                    <!-- User playlists -->
                    <div id="user-playlists" class="playlist-embedding"></div>

                </div>


                <!-- User playlist container template -->
                <script id="user-playlist-embedding-template" type="text/x-handlebars-template">
                    <div class="spotify-playlist">
                <span class="mdl-chip">
                  <span class="mdl-chip__text">{{name}}</span>
                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-{{id}}">
                    <input type="checkbox" id="toggle-{{id}}" class="mdl-switch__input">
                    <span class="mdl-switch__label"></span>
                  </label>
                </span>

                        <div class="spotify-content">
                            <iframe src="https://open.spotify.com/embed/playlist/{{id}}" width="220" height="200"
                                    allowtransparency="true" allow="encrypted-media"></iframe>
                        </div>
                    </div>
                </script>

                <!-- User profile container template -->
                <script id="user-profile-template" type="text/x-handlebars-template">
                    <h2>Welcome {{display_name}} !</h2>
                </script>

            </div>

            <!-- POPULAR PLAYLISTS Headline  -->
            <div class="headline">
                <hr>
                <h1> OR CHOOSE AMONG THE MOST POPULAR ONES</h1>
                <hr>

                <p class="p-text">
                    You don't have a Spotify account or do not want to connect, that's ok! <br> Explore some of the most
                    famous playlists!
                </p>
            </div>

            <!-- DEFAULT PLAYLISTS -->
            <div id="default-playlists" class="playlist-embedding"></div>

            <!-- ANALYSE BUTTON -->
            <div class='centered-container'>

                <a id="analyze"
                   class="mdl-button mdl-js-button mdl-button--raised
                   mdl-js-ripple-effect mdl-button--accent">ANALYZE</a>
            </div>


            <!-- AUDIO FEATURES VISUALIZATION -->
            <div id="playlist-viz">
                <hr>
                <h1 id="audio_features_headline"> AUDIO FEATURES VISUALIZATION</h1>
                <hr>

                <!-- SCATTER PLOT VISUALIZATION  -->
                <div id="scatter-viz">
                    <!-- PARAMETER SELECTION -->
                    <label for="feature-select-button">Select features:</label>
                    <select id="feature-select-button" multiple></select>
                    <br>
                    <svg id="scatter-plot-legend" height=200 width=450></svg>

                    <div id="cross-correlation-grid"></div>
                </div>


                <div id="graph-viz">
                    <hr>
                    <h1 id="artists_graph_headline">ARTISTS GRAPH VISUALIZATION</h1>
                    <hr>

                    <p class="p-text">
                        Let's explore the relationship between the artists in our playlist(s). <br>
                        What are the most connected track?
                        Does two playlists share related artists or tracks?
                        How homogeneous or heterogeneous is a playlist? <br>
                        Navigate the graph, move your mouse on the nodes and track names to highlight the links.
                        Use the Arcs setting to observe internal and external playlists connections.
                    </p>

                    <!-- Settings -->
                    <div class="centered-container">
                        <span id="button-arcs" class="mdl-chip">
                         <span class="mdl-chip__text">Arcs</span>
                         <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-arcs">
                             <input type="checkbox" id="toggle-arcs" class="mdl-switch__input">
                             <span class="mdl-switch__label"></span>
                        </label>

                     </span>

                        <span id="button-related" class="mdl-chip">
                         <span class="mdl-chip__text">Related Artists</span>
                         <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-related">
                             <input type="checkbox" id="toggle-related" class="mdl-switch__input">
                             <span class="mdl-switch__label"></span>
                        </label>
                     </span>

                        <span id="button-force" class="mdl-chip">
                         <span class="mdl-chip__text">Force Links</span>
                         <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-force">
                             <input type="checkbox" id="toggle-force" class="mdl-switch__input">
                             <span class="mdl-switch__label"></span>
                        </label>
                     </span>
                    </div>

                    <div class='centered-container'>

                        <span id="button-texts" class="mdl-chip">
                            <span class="mdl-chip__text">Show Artists Name</span>
                            <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-texts">
                                <input type="checkbox" id="toggle-texts" class="mdl-switch__input">
                                <span class="mdl-switch__label"></span>
                            </label>
                        </span>

                        <span id="button-legend" class="mdl-chip">
                            <span class="mdl-chip__text">Show Legend</span>
                            <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-legend">
                                <input type="checkbox" id="toggle-legend" class="mdl-switch__input" checked>
                                <span class="mdl-switch__label"></span>
                            </label>
                        </span>

                        <span id="button-tooltip" class="mdl-chip">
                            <span class="mdl-chip__text">Show Tooltip</span>
                            <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="toggle-tooltip">
                                <input type="checkbox" id="toggle-tooltip" class="mdl-switch__input">
                                <span class="mdl-switch__label"></span>
                            </label>
                        </span>
                    </div>

                    <!-- Visualization -->

                    <div id="graph-artists"></div>

                </div>
            </div>
        </div>
    </main>

</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="js/spotify-communication.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="js/scatterPlot.js"></script>
<script src="js/artists-graph.js"></script>

<script>


    $("#playlists_header").click(function () {
        document.getElementById("playlists_headline").scrollIntoView({behavior: "smooth"});
    });

    $("#audio_features_header").click(function () {
        document.getElementById("audio_features_headline").scrollIntoView({behavior: "smooth"});
    });

    $("#artists_graph_header").click(function () {
        document.getElementById("artists_graph_headline").scrollIntoView({behavior: "smooth"});
    });
</script>


</body>
</html>

